"use strict";(self["webpackChunkgachivue0_4"]=self["webpackChunkgachivue0_4"]||[]).push([[9738],{9738:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var l=n(6252);const a={class:"form-group center"},o={ref:"fileLabel",class:"custom-file-label","data-browse":"Browse"},i={class:"uploadResult"},s={ref:"upResult"};function u(e,t,n,u,r,c){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",a,[(0,l._)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>u.fileChange&&u.fileChange(...e)),ref:"fileInput",class:"form-control",multiple:""},null,544),(0,l._)("label",o,null,512)]),(0,l._)("div",i,[(0,l._)("ul",s,null,512)])])}var r=n(9669),c=n.n(r),f=n(2262),p={name:"SessionUploadPic",props:[],data(){return{}},setup(){const e=new RegExp("(.*?).(exe|sh|zip|alz|tiff)$"),t=10485760,n=(0,f.qj)({fileInput:"",fileLabel:"",upResult:"",token:sessionStorage.getItem("TOKEN")}),l=(0,f.iH)(""),a=(0,f.iH)(""),o=(0,f.iH)(""),i=(n,l)=>l>t?(alert("파일사이즈초과"),!1):!e.test(n)||(alert("해당파일은 업로드 될 수 없습니다."),!1),s=async()=>{const e=l.value.value.split("\\").pop();a.value.innerHTML=l.value.files.length-1==0?"":e+" 외 "+(l.value.files.length-1)+"개";var t=new FormData,o=l.value.files,s=!1;for(let n=0;n<o.length;n++){if(!i(o[n].name,o[n].size))return a.value.innerHTML="",this.value="",!1;t.append("uploadFiles",o[n]),s=!0}if(!s)return;for(let n of t.values())console.log(n);const r="http://localhost:9090/api/uploadAjax/";await c().post(r,t,{headers:{"Content-Type":"multipart/form-data","process-data":!1,Authorization:n.token,token:n.token}}).then((function(e){u(e.data)})).catch((function(e){}))},u=async e=>{const t=o.value,l="/display",a=`http://localhost:9090${l}`;let i="";for(let n=0;n<e.length;n++)i+=`\n          <li data-name='${e[n].fileName}' data-path='${e[n].folderPath}' \n              data-uuid='${e[n].uuid}' data-file='${e[n].imageURL}'>\n            <div>\n              <button type='button' class='removeBtn'>X</button>\n              <br><img src='${a}?fileName=${e[n].thumbnailURL}'>\n            </div>\n          </li>`;t.innerHTML=i;const s=document.querySelectorAll(".removeBtn");for(let o=0;o<s.length;o++)s[o].onclick=function(){const e="http://localhost:9090/api/removeFile",t=this.parentElement.closest("li"),l=t.dataset.file,a={"Content-Type":"application/json",Authorization:n.token,token:n.token};c()({method:"POST",url:`${e}?fileName=${l}`,headers:a}).then((function(e){!0===e.data&&t.remove()})).catch((function(e){console.log(e)}))}};return{state:n,fileInput:l,fileLabel:a,upResult:o,fileChange:s,checkExtension:i}}},h=n(3744);const d=(0,h.Z)(p,[["render",u]]);var v=d}}]);
//# sourceMappingURL=9738.c68adf25.js.map