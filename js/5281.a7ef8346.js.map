{"version":3,"file":"js/5281.a7ef8346.js","mappings":"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","sources":["webpack://gachivue0.4/./src/components/UserProfilePic.vue","webpack://gachivue0.4/./src/components/UserProfilePic.vue?bc76"],"sourcesContent":["<template>\r\n    <div>\r\n        \r\n        <div class=\"form-group centerz\">\r\n            <input type=\"file\" @change=\"fileChange\" ref=\"fileInput\" class=\"form-control fileUpload\" />\r\n            <label ref=\"fileLabel\" class=\"custom-file-label\" data-browse=\"Browse\"></label>\r\n        </div>\r\n        <div class=\"uploadResult\">\r\n            <ul ref=\"upResult\"></ul>\r\n        </div>\r\n    </div>\r\n</template>\r\n  \r\n<script>\r\nimport axios from 'axios'\r\nimport { reactive, ref } from '@vue/reactivity'\r\n\r\nexport default {\r\n    name: 'UserProfilePic',\r\n    props: [],\r\n    data() { return {} },\r\n    setup() {\r\n        const regex = new RegExp(\"(.*?).(exe|sh|zip|alz|tiff)$\");\r\n        const maxSize = 1024 * 1024 * 10; //10MB\r\n        const state = reactive({\r\n            fileInput: '',\r\n            fileLabel: '',\r\n            upResult: '',\r\n            token: sessionStorage.getItem(\"TOKEN\"),\r\n        })\r\n        const fileInput = ref('')\r\n        const fileLabel = ref('')\r\n        const upResult = ref('')\r\n\r\n        const checkExtension = (fileName, fileSize) => {\r\n            if (fileSize > maxSize) {\r\n                alert('파일사이즈초과')\r\n                return false;\r\n            }\r\n            if (regex.test(fileName)) {\r\n                alert('해당파일은 업로드 될 수 없습니다.')\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        const fileChange = async () => {\r\n            const fileName = fileInput.value.value.split(\"\\\\\").pop() //맨끝만 나옴.\r\n            fileLabel.value.innerHTML = (fileInput.value.files.length - 1) == 0 ? \"\" :\r\n                fileName + \" 외 \" + (fileInput.value.files.length - 1) + \"개\";\r\n\r\n            var formData = new FormData();\r\n            var files = fileInput.value.files;\r\n            var appended = false;\r\n\r\n            for (let i = 0; i < files.length; i++) {\r\n                if (!checkExtension(files[i].name, files[i].size)) {\r\n                    fileLabel.value.innerHTML = \"\"\r\n                    this.value = ''\r\n                    return false;\r\n                }\r\n                formData.append(\"uploadFiles\", files[i]);\r\n                appended = true;\r\n            }\r\n\r\n            //전송할 파일이 없으면 여기서 끝.If there are no files to transfer, end here.\r\n            if (!appended) return;\r\n\r\n            //전송할 파일이 있으면 목록 보기.It there are files to transfer,show list.\r\n            for (let value of formData.values()) console.log(value)\r\n\r\n            const url = 'http://localhost:9090/signup/uploadAjax'\r\n            await axios.post(url, formData, {\r\n                headers: {\r\n                    \"Content-Type\": \"multipart/form-data\",\r\n                    \"process-data\": false,\r\n                },\r\n            }).then(function (res) {\r\n                showResult(res.data);\r\n            }).catch(function (err) {\r\n                console.log(err)\r\n            })\r\n        }\r\n        const showResult = async (arr) => {\r\n            const uploadUL = upResult.value;\r\n            const displayUrl = '/display'\r\n            const url = `http://localhost:9090${displayUrl}`\r\n            let str = \"\"\r\n            for (let i = 0; i < arr.length; i++) {\r\n                str += `\r\n            <li data-name='${arr[i].fileName}' data-path='${arr[i].folderPath}' \r\n                data-uuid='${arr[i].uuid}' data-file='${arr[i].imageURL}'>\r\n              <div>\r\n                <button type='button' class='removeBtn'>X</button>\r\n                <br><img src='${url}?fileName=${arr[i].thumbnailURL}'>\r\n              </div>\r\n            </li>`\r\n            }\r\n            uploadUL.innerHTML = str;\r\n            const removeBtns = document.querySelectorAll(\".removeBtn\");\r\n            for (let i = 0; i < removeBtns.length; i++) {\r\n                removeBtns[i].onclick = function () {\r\n                    const removeUrl = 'http://localhost:9090/api/removeFile'\r\n                    const targetLI = this.parentElement.closest('li')\r\n                    const fileName = targetLI.dataset.file\r\n                    const headers = {\r\n                        \"Content-Type\": \"application/json\",\r\n                        Authorization: state.token,\r\n                        \"token\": state.token\r\n                    }\r\n                    axios({\r\n                        method: \"POST\",\r\n                        url: `${removeUrl}?fileName=${fileName}`,\r\n                        headers: headers,\r\n                    }).then(function (res) {\r\n                        if (res.data === true) targetLI.remove();\r\n                    }).catch(function (err) { console.log(err) });\r\n                }\r\n            }\r\n        }\r\n        return { state, fileInput, fileLabel, upResult, fileChange, checkExtension }\r\n    },\r\n}\r\n</script>\r\n    \r\n<style>\r\n.centerz {\r\n    display: inline-block;\r\n    width: 95px;\r\n    text-align: right;\r\n    color: rgb(138, 156, 189);\r\n    margin: 10px 0;\r\n}\r\n\r\n.uploadResult {\r\n    /* width: 100%;\r\n    background-color: gray;\r\n    margin-top: 10px; */\r\n}\r\n\r\n.uploadResult ul {\r\n    margin-left: 0px;\r\n    padding-left: 0px;\r\n}\r\n\r\n.uploadResult ul li {\r\n    list-style: none;\r\n    /*padding: 10px;\r\n    margin-left: 2em; */\r\n    text-align: left;\r\n}\r\n\r\n.uploadResult ul li img {\r\n    width: 100px;\r\n}\r\n\r\n.removeBtn {\r\n    border: 0px;\r\n    background-color: white;\r\n    color: gray;\r\n    font-size: 20px;\r\n    margin: 0px 0px 0px 0px;\r\n    padding: 0px 0px 0px 0px;\r\n    align: left;\r\n}\r\n\r\n.fileUpload {\r\n    width: 88px;\r\n}\r\n</style>\r\n    ","import { render } from \"./UserProfilePic.vue?vue&type=template&id=d9410bec\"\nimport script from \"./UserProfilePic.vue?vue&type=script&lang=js\"\nexport * from \"./UserProfilePic.vue?vue&type=script&lang=js\"\n\nimport \"./UserProfilePic.vue?vue&type=style&index=0&id=d9410bec&lang=css\"\n\nimport exportComponent from \"D:\\\\DS Portfolio\\\\DS-Nolaboda-Gachi\\\\gachivue0.4\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","ref","_createElementBlock","_createElementVNode","type","onChange","$setup","name","props","data","setup","regex","RegExp","maxSize","state","reactive","fileInput","fileLabel","upResult","token","sessionStorage","getItem","checkExtension","fileName","fileSize","alert","test","fileChange","async","value","split","pop","innerHTML","files","length","formData","FormData","appended","i","size","this","append","values","console","log","url","axios","headers","then","res","showResult","catch","err","uploadUL","displayUrl","str","arr","folderPath","uuid","imageURL","thumbnailURL","removeBtns","document","querySelectorAll","onclick","removeUrl","targetLI","parentElement","closest","dataset","file","Authorization","method","remove","__exports__","render"],"sourceRoot":""}