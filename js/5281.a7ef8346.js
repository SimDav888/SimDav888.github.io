"use strict";(self["webpackChunkgachivue0_4"]=self["webpackChunkgachivue0_4"]||[]).push([[5281],{5281:function(e,t,l){l.r(t),l.d(t,{default:function(){return v}});var n=l(6252);const a={class:"form-group centerz"},o={ref:"fileLabel",class:"custom-file-label","data-browse":"Browse"},i={class:"uploadResult"},s={ref:"upResult"};function u(e,t,l,u,r,c){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",a,[(0,n._)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>u.fileChange&&u.fileChange(...e)),ref:"fileInput",class:"form-control fileUpload"},null,544),(0,n._)("label",o,null,512)]),(0,n._)("div",i,[(0,n._)("ul",s,null,512)])])}var r=l(9669),c=l.n(r),f=l(2262),p={name:"UserProfilePic",props:[],data(){return{}},setup(){const e=new RegExp("(.*?).(exe|sh|zip|alz|tiff)$"),t=10485760,l=(0,f.qj)({fileInput:"",fileLabel:"",upResult:"",token:sessionStorage.getItem("TOKEN")}),n=(0,f.iH)(""),a=(0,f.iH)(""),o=(0,f.iH)(""),i=(l,n)=>n>t?(alert("파일사이즈초과"),!1):!e.test(l)||(alert("해당파일은 업로드 될 수 없습니다."),!1),s=async()=>{const e=n.value.value.split("\\").pop();a.value.innerHTML=n.value.files.length-1==0?"":e+" 외 "+(n.value.files.length-1)+"개";var t=new FormData,l=n.value.files,o=!1;for(let n=0;n<l.length;n++){if(!i(l[n].name,l[n].size))return a.value.innerHTML="",this.value="",!1;t.append("uploadFiles",l[n]),o=!0}if(!o)return;for(let n of t.values())console.log(n);const s="http://localhost:9090/signup/uploadAjax";await c().post(s,t,{headers:{"Content-Type":"multipart/form-data","process-data":!1}}).then((function(e){u(e.data)})).catch((function(e){console.log(e)}))},u=async e=>{const t=o.value,n="/display",a=`http://localhost:9090${n}`;let i="";for(let l=0;l<e.length;l++)i+=`\n            <li data-name='${e[l].fileName}' data-path='${e[l].folderPath}' \n                data-uuid='${e[l].uuid}' data-file='${e[l].imageURL}'>\n              <div>\n                <button type='button' class='removeBtn'>X</button>\n                <br><img src='${a}?fileName=${e[l].thumbnailURL}'>\n              </div>\n            </li>`;t.innerHTML=i;const s=document.querySelectorAll(".removeBtn");for(let o=0;o<s.length;o++)s[o].onclick=function(){const e="http://localhost:9090/api/removeFile",t=this.parentElement.closest("li"),n=t.dataset.file,a={"Content-Type":"application/json",Authorization:l.token,token:l.token};c()({method:"POST",url:`${e}?fileName=${n}`,headers:a}).then((function(e){!0===e.data&&t.remove()})).catch((function(e){console.log(e)}))}};return{state:l,fileInput:n,fileLabel:a,upResult:o,fileChange:s,checkExtension:i}}},h=l(3744);const d=(0,h.Z)(p,[["render",u]]);var v=d}}]);
//# sourceMappingURL=5281.a7ef8346.js.map