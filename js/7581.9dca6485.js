"use strict";(self["webpackChunkgachivue0_4"]=self["webpackChunkgachivue0_4"]||[]).push([[7581,3587,5927],{5927:function(e,t,l){l.r(t),l.d(t,{default:function(){return c}});var n=l(6252);function a(e,t,l,a,o,s){const i=(0,n.up)("el-option"),u=(0,n.up)("el-select");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(u,{onChange:[a.onChange,s.onEmit],modelValue:a.state.lists.goalid,"onUpdate:modelValue":t[0]||(t[0]=e=>a.state.lists.goalid=e),clearable:"",placeholder:"내 목표리스트에서 선택",style:{width:"325px"}},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.state.lists,(e=>((0,n.wg)(),(0,n.j4)(i,{key:e,label:e.name,value:e.goalid},null,8,["label","value"])))),128))])),_:1},8,["onChange","modelValue"])])}var o=l(9669),s=l.n(o),i=l(2262),u={methods:{onEmit(){this.$emit("setInput",this.state.lists.goalid)}},setup(){const e=(0,i.qj)({uid:"",lists:"",email:sessionStorage.getItem("email"),token:sessionStorage.getItem("TOKEN")}),t=(0,i.iH)(""),l="http://43.201.60.125/api/goalNameList",n={"Content-Type":"application/json",Authorization:e.token,token:e.token},a={email:e.email};s().post(l,a,{headers:n}).then((function(t){null!=t.data?(e.lists=t.data,console.log(e.lists[0]),console.log("state.lists[0].goalid"+e.lists[0].goalid),console.log("state.lists[0].goalName"+e.lists[0].name)):alert("too bad. check something")}));const o=()=>{console.log(e.lists.goalid)};return{state:e,uid:t,onChange:o}}},r=l(3744);const d=(0,r.Z)(u,[["render",a]]);var c=d},7581:function(e,t,l){l.r(t),l.d(t,{default:function(){return O}});var n=l(6252),a=l(3577),o=l(9963);const s=e=>((0,n.dD)("data-v-42e00f33"),e=e(),(0,n.Cn)(),e),i={for:""},u=s((()=>(0,n._)("br",null,null,-1))),r={for:""},d=s((()=>(0,n._)("br",null,null,-1))),c={for:""},p=s((()=>(0,n._)("br",null,null,-1))),m={for:""},f=s((()=>(0,n._)("br",null,null,-1))),h=s((()=>(0,n._)("br",null,null,-1))),g=s((()=>(0,n._)("div",{class:"box"},null,-1))),v={for:""};function T(e,t,l,s,T,b){const y=(0,n.up)("SelectGoalList"),k=(0,n.up)("SessionUploadPic"),_=(0,n.up)("el-button");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("h1",null,(0,a.zw)(T.message),1),(0,n._)("form",null,[(0,n._)("label",i,[(0,n.wy)((0,n._)("input",{type:"text",ref:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.state.name=e),placeholder:"SessionName",required:"",autofocus:"",class:"form-control"},null,512),[[o.nr,s.state.name]])]),u,(0,n._)("label",r,[(0,n.wy)((0,n._)("input",{type:"number",class:"form-control",ref:"laps","onUpdate:modelValue":t[1]||(t[1]=e=>s.state.laps=e),placeholder:"laps"},null,512),[[o.nr,s.state.laps]])]),d,(0,n._)("label",c,[(0,n.wy)((0,n._)("input",{type:"number",class:"form-control",ref:"rushTime","onUpdate:modelValue":t[2]||(t[2]=e=>s.state.rushTime=e),placeholder:"rushTime"},null,512),[[o.nr,s.state.rushTime]])]),p,(0,n._)("label",m,[(0,n.wy)((0,n._)("input",{type:"number",class:"form-control",ref:"restTime","onUpdate:modelValue":t[3]||(t[3]=e=>s.state.restTime=e),placeholder:"restTime"},null,512),[[o.nr,s.state.restTime]])]),f,(0,n.Wm)(y,{onSetInput:s.goalid},null,8,["onSetInput"]),h,g,(0,n.Wm)(k),(0,n._)("label",v,[(0,n.Wm)(_,{type:"primary",onClick:s.registerHandler},{default:(0,n.w5)((()=>[(0,n.Uk)("Register")])),_:1},8,["onClick"])])])])}l(7658);var b=l(2262),y=l(9669),k=l.n(y),_=l(2201),L=l(3587),w=l(5927),$={name:"TheJoin",components:{SessionUploadPic:L["default"],SelectGoalList:w["default"]},setup(){(0,_.tv)();const e=(0,b.qj)({goalid:"",uid:"",sessid:"",name:"",laps:"",rushTime:"",restTime:"",fileDTOList:new Array,token:sessionStorage.getItem("TOKEN"),email:sessionStorage.getItem("email")}),t=t=>{console.log(t),e.goalid=t},l=(0,b.iH)(""),n=(0,b.iH)(""),a=(0,b.iH)(""),o=(0,b.iH)(""),s="http://43.201.60.125/api/getUidWithEmail",i={"Content-Type":"application/json",Authorization:e.token,token:e.token},u={email:e.email};k().post(s,u,{headers:i}).then((function(t){null!=t?(e.uid=t.data,console.log("uid checking :: "+e.uid)):alert("too bad. check something")}));const r=async()=>{let t="";const l=document.querySelectorAll(".uploadResult ul li");for(let i=0;i<l.length;i++){const n=l[i];t+=`\n\n            <input type="hidden" name="fileDTOList[${i}].sessid"\n            value="${n.dataset.sessid}">\n            <input type="hidden" name="fileDTOList[${i}].uid"\n            value="${n.dataset.uid}">\n            <input type="hidden" name="fileDTOList[${i}].imgName"\n            value="${n.dataset.name}">\n            <input type="hidden" name="fileDTOList[${i}].path"\n            value="${n.dataset.path}">\n            <input type="hidden" name="fileDTOList[${i}].uuid"\n            value="${n.dataset.uuid}">\n          `;const a={sessid:e.sessid,uid:e.uid,imgName:n.dataset.name,path:n.dataset.path,uuid:n.dataset.uuid};e.fileDTOList.push(a)}console.log(e.fileDTOList[0].sessid),console.log(e.fileDTOList[0].uid),console.log(e.fileDTOList[0].imgName),console.log(e.fileDTOList[0].path),console.log(e.fileDTOList[0].uuid),document.querySelector(".box").innerHTML=t;const n="http://43.201.60.125/api/sessionRegister",a={"Content-Type":"application/json",Authorization:e.token,token:e.token},o={name:e.name,laps:e.laps,rushTime:e.rushTime,restTime:e.restTime,fileDTOList:e.fileDTOList,goalid:e.goalid,uid:e.uid,sessid:e.sessid},s=await k().post(n,o,{headers:a});console.log(s.data),200===s.status?(console.log(e.goalid),alert("wow successfully uploaded 😗")):alert("failed to upload")};return{state:e,name:l,laps:n,rushTime:a,restTime:o,goalid:t,registerHandler:r}},data(){return{message:"Session Maker"}}},D=l(3744);const C=(0,D.Z)($,[["render",T],["__scopeId","data-v-42e00f33"]]);var O=C},3587:function(e,t,l){l.r(t),l.d(t,{default:function(){return h}});var n=l(6252);const a={class:"form-group center"},o={ref:"fileLabel",class:"custom-file-label","data-browse":"Browse"},s={class:"uploadResult"},i={ref:"upResult"};function u(e,t,l,u,r,d){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",a,[(0,n._)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>u.fileChange&&u.fileChange(...e)),ref:"fileInput",class:"form-control",multiple:""},null,544),(0,n._)("label",o,null,512)]),(0,n._)("div",s,[(0,n._)("ul",i,null,512)])])}var r=l(9669),d=l.n(r),c=l(2262),p={name:"SessionUploadPic",props:[],data(){return{}},setup(){const e=new RegExp("(.*?).(exe|sh|zip|alz|tiff)$"),t=10485760,l=(0,c.qj)({fileInput:"",fileLabel:"",upResult:"",token:sessionStorage.getItem("TOKEN")}),n=(0,c.iH)(""),a=(0,c.iH)(""),o=(0,c.iH)(""),s=(l,n)=>n>t?(alert("파일사이즈초과"),!1):!e.test(l)||(alert("해당파일은 업로드 될 수 없습니다."),!1),i=async()=>{const e=n.value.value.split("\\").pop();console.log(e),a.value.innerHTML=n.value.files.length-1==0?"":e+" 외 "+(n.value.files.length-1)+"개";var t=new FormData,o=n.value.files,i=!1;for(let l=0;l<o.length;l++){if(!s(o[l].name,o[l].size))return a.value.innerHTML="",this.value="",!1;t.append("uploadFiles",o[l]),i=!0}if(!i)return;for(let l of t.values())console.log(l);const r="http://43.201.60.125/api/uploadAjax/";await d().post(r,t,{headers:{"Content-Type":"multipart/form-data","process-data":!1,Authorization:l.token,token:l.token}}).then((function(e){u(e.data)})).catch((function(e){console.log(e)}))},u=async e=>{const t=o.value,n="/display",a=`http://43.201.60.125${n}`;let s="";for(let l=0;l<e.length;l++)s+=`\n          <li data-name='${e[l].fileName}' data-path='${e[l].folderPath}' \n              data-uuid='${e[l].uuid}' data-file='${e[l].imageURL}'>\n            <div>\n              <button type='button' class='removeBtn'>X</button>\n              <br><img src='${a}?fileName=${e[l].thumbnailURL}'>\n            </div>\n          </li>`;t.innerHTML=s;const i=document.querySelectorAll(".removeBtn");for(let o=0;o<i.length;o++)i[o].onclick=function(){const e="http://43.201.60.125/api/removeFile",t=this.parentElement.closest("li"),n=t.dataset.file,a={"Content-Type":"application/json",Authorization:l.token,token:l.token};d()({method:"POST",url:`${e}?fileName=${n}`,headers:a}).then((function(e){!0===e.data&&t.remove()})).catch((function(e){console.log(e)}))}};return{state:l,fileInput:n,fileLabel:a,upResult:o,fileChange:i,checkExtension:s}}},m=l(3744);const f=(0,m.Z)(p,[["render",u]]);var h=f}}]);
//# sourceMappingURL=7581.9dca6485.js.map