"use strict";(self["webpackChunkgachivue0_4"]=self["webpackChunkgachivue0_4"]||[]).push([[1795,9738,4620],{4620:function(e,t,l){l.r(t),l.d(t,{default:function(){return p}});var n=l(6252);function a(e,t,l,a,s,i){const o=(0,n.up)("el-option"),u=(0,n.up)("el-select");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(u,{onChange:[a.onChange,i.onEmit],modelValue:a.state.lists.goalid,"onUpdate:modelValue":t[0]||(t[0]=e=>a.state.lists.goalid=e),clearable:"",placeholder:"내 목표리스트에서 선택"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.state.lists,(e=>((0,n.wg)(),(0,n.j4)(o,{key:e,label:e.name,value:e.goalid},null,8,["label","value"])))),128))])),_:1},8,["onChange","modelValue"])])}var s=l(9669),i=l.n(s),o=l(2262),u={methods:{onEmit(){this.$emit("setInput",this.state.lists.goalid)}},setup(){const e=(0,o.qj)({uid:"",lists:"",email:sessionStorage.getItem("email"),token:sessionStorage.getItem("TOKEN")}),t=(0,o.iH)(""),l="http://localhost:9090/api/goalNameList",n={"Content-Type":"application/json",Authorization:e.token,token:e.token},a={email:e.email};i().post(l,a,{headers:n}).then((function(t){null!=t.data?e.lists=t.data:alert("too bad. check something")}));const s=()=>{console.log(e.lists.goalid)};return{state:e,uid:t,onChange:s}}},r=l(3744);const d=(0,r.Z)(u,[["render",a]]);var p=d},1795:function(e,t,l){l.r(t),l.d(t,{default:function(){return D}});var n=l(6252),a=l(3577),s=l(9963);const i=e=>((0,n.dD)("data-v-d79fd612"),e=e(),(0,n.Cn)(),e),o={for:""},u=i((()=>(0,n._)("br",null,null,-1))),r={for:""},d=i((()=>(0,n._)("br",null,null,-1))),p={for:""},c=i((()=>(0,n._)("br",null,null,-1))),m={for:""},f=i((()=>(0,n._)("br",null,null,-1))),h=i((()=>(0,n._)("br",null,null,-1))),g=i((()=>(0,n._)("div",{class:"box"},null,-1))),v={for:""};function T(e,t,l,i,T,b){const y=(0,n.up)("SelectGoalList"),k=(0,n.up)("SessionUploadPic"),_=(0,n.up)("el-button");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("h1",null,(0,a.zw)(T.message),1),(0,n._)("form",null,[(0,n._)("label",o,[(0,n.wy)((0,n._)("input",{type:"text",ref:"name","onUpdate:modelValue":t[0]||(t[0]=e=>i.state.name=e),placeholder:"SessionName",required:"",autofocus:"",class:"form-control"},null,512),[[s.nr,i.state.name]])]),u,(0,n._)("label",r,[(0,n.wy)((0,n._)("input",{type:"number",class:"form-control",ref:"laps","onUpdate:modelValue":t[1]||(t[1]=e=>i.state.laps=e),placeholder:"laps"},null,512),[[s.nr,i.state.laps]])]),d,(0,n._)("label",p,[(0,n.wy)((0,n._)("input",{type:"number",class:"form-control",ref:"rushTime","onUpdate:modelValue":t[2]||(t[2]=e=>i.state.rushTime=e),placeholder:"rushTime"},null,512),[[s.nr,i.state.rushTime]])]),c,(0,n._)("label",m,[(0,n.wy)((0,n._)("input",{type:"number",class:"form-control",ref:"restTime","onUpdate:modelValue":t[3]||(t[3]=e=>i.state.restTime=e),placeholder:"restTime"},null,512),[[s.nr,i.state.restTime]])]),f,(0,n.Wm)(y,{onSetInput:i.goalid},null,8,["onSetInput"]),h,g,(0,n.Wm)(k),(0,n._)("label",v,[(0,n.Wm)(_,{type:"primary",onClick:i.registerHandler},{default:(0,n.w5)((()=>[(0,n.Uk)("Register")])),_:1},8,["onClick"])])])])}l(7658);var b=l(2262),y=l(9669),k=l.n(y),_=l(2201),w=l(9738),L=l(4620),$={name:"TheJoin",components:{SessionUploadPic:w["default"],SelectGoalList:L["default"]},setup(){(0,_.tv)();const e=(0,b.qj)({goalid:"",uid:"",sessid:"",name:"",laps:"",rushTime:"",restTime:"",fileDTOList:new Array,token:sessionStorage.getItem("TOKEN"),email:sessionStorage.getItem("email")}),t=t=>{e.goalid=t},l=(0,b.iH)(""),n=(0,b.iH)(""),a=(0,b.iH)(""),s=(0,b.iH)(""),i="http://localhost:9090/api/getUidWithEmail",o={"Content-Type":"application/json",Authorization:e.token,token:e.token},u={email:e.email};k().post(i,u,{headers:o}).then((function(t){null!=t?e.uid=t.data:alert("too bad. check something")}));const r=async()=>{let t="";const l=document.querySelectorAll(".uploadResult ul li");for(let o=0;o<l.length;o++){const n=l[o];t+=`\n\n            <input type="hidden" name="fileDTOList[${o}].sessid"\n            value="${n.dataset.sessid}">\n            <input type="hidden" name="fileDTOList[${o}].uid"\n            value="${n.dataset.uid}">\n            <input type="hidden" name="fileDTOList[${o}].imgName"\n            value="${n.dataset.name}">\n            <input type="hidden" name="fileDTOList[${o}].path"\n            value="${n.dataset.path}">\n            <input type="hidden" name="fileDTOList[${o}].uuid"\n            value="${n.dataset.uuid}">\n          `;const a={sessid:e.sessid,uid:e.uid,imgName:n.dataset.name,path:n.dataset.path,uuid:n.dataset.uuid};e.fileDTOList.push(a)}document.querySelector(".box").innerHTML=t;const n="http://localhost:9090/api/sessionRegister",a={"Content-Type":"application/json",Authorization:e.token,token:e.token},s={name:e.name,laps:e.laps,rushTime:e.rushTime,restTime:e.restTime,fileDTOList:e.fileDTOList,goalid:e.goalid,uid:e.uid,sessid:e.sessid},i=await k().post(n,s,{headers:a});200===i.status?alert("wow successfully uploaded 😗"):alert("failed to upload")};return{state:e,name:l,laps:n,rushTime:a,restTime:s,goalid:t,registerHandler:r}},data(){return{message:"Session Maker"}}},C=l(3744);const S=(0,C.Z)($,[["render",T],["__scopeId","data-v-d79fd612"]]);var D=S},9738:function(e,t,l){l.r(t),l.d(t,{default:function(){return h}});var n=l(6252);const a={class:"form-group center"},s={ref:"fileLabel",class:"custom-file-label","data-browse":"Browse"},i={class:"uploadResult"},o={ref:"upResult"};function u(e,t,l,u,r,d){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",a,[(0,n._)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>u.fileChange&&u.fileChange(...e)),ref:"fileInput",class:"form-control",multiple:""},null,544),(0,n._)("label",s,null,512)]),(0,n._)("div",i,[(0,n._)("ul",o,null,512)])])}var r=l(9669),d=l.n(r),p=l(2262),c={name:"SessionUploadPic",props:[],data(){return{}},setup(){const e=new RegExp("(.*?).(exe|sh|zip|alz|tiff)$"),t=10485760,l=(0,p.qj)({fileInput:"",fileLabel:"",upResult:"",token:sessionStorage.getItem("TOKEN")}),n=(0,p.iH)(""),a=(0,p.iH)(""),s=(0,p.iH)(""),i=(l,n)=>n>t?(alert("파일사이즈초과"),!1):!e.test(l)||(alert("해당파일은 업로드 될 수 없습니다."),!1),o=async()=>{const e=n.value.value.split("\\").pop();a.value.innerHTML=n.value.files.length-1==0?"":e+" 외 "+(n.value.files.length-1)+"개";var t=new FormData,s=n.value.files,o=!1;for(let l=0;l<s.length;l++){if(!i(s[l].name,s[l].size))return a.value.innerHTML="",this.value="",!1;t.append("uploadFiles",s[l]),o=!0}if(!o)return;for(let l of t.values())console.log(l);const r="http://localhost:9090/api/uploadAjax/";await d().post(r,t,{headers:{"Content-Type":"multipart/form-data","process-data":!1,Authorization:l.token,token:l.token}}).then((function(e){u(e.data)})).catch((function(e){}))},u=async e=>{const t=s.value,n="/display",a=`http://localhost:9090${n}`;let i="";for(let l=0;l<e.length;l++)i+=`\n          <li data-name='${e[l].fileName}' data-path='${e[l].folderPath}' \n              data-uuid='${e[l].uuid}' data-file='${e[l].imageURL}'>\n            <div>\n              <button type='button' class='removeBtn'>X</button>\n              <br><img src='${a}?fileName=${e[l].thumbnailURL}'>\n            </div>\n          </li>`;t.innerHTML=i;const o=document.querySelectorAll(".removeBtn");for(let s=0;s<o.length;s++)o[s].onclick=function(){const e="http://localhost:9090/api/removeFile",t=this.parentElement.closest("li"),n=t.dataset.file,a={"Content-Type":"application/json",Authorization:l.token,token:l.token};d()({method:"POST",url:`${e}?fileName=${n}`,headers:a}).then((function(e){!0===e.data&&t.remove()})).catch((function(e){console.log(e)}))}};return{state:l,fileInput:n,fileLabel:a,upResult:s,fileChange:o,checkExtension:i}}},m=l(3744);const f=(0,m.Z)(c,[["render",u]]);var h=f}}]);
//# sourceMappingURL=1795.4469b2fa.js.map